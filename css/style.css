/* ===== RESET ===== */
* { margin: 0; padding: 0; box-sizing: border-box; }

:root{
  --cycle: 16s;      /* длительность одной "истории" */
  --meetStart: 0%;
  --meetEnd: 46%;    /* сближение */
  --flashStart: 49%;
  --flashEnd: 56%;
  --seadraStart: 57%;
}

body{
  height: 100vh;
  overflow: hidden;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: #02111a;
}

/* ===== SCENE ===== */
.ocean{
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* ===== BEAUTIFUL BACKGROUND ===== */
.bg{
  position:absolute;
  inset:0;
  background:
    radial-gradient(1000px 700px at 50% -10%, rgba(120,240,255,.35), transparent 60%),
    radial-gradient(900px 700px at 20% 30%, rgba(0,180,255,.25), transparent 55%),
    radial-gradient(900px 700px at 90% 40%, rgba(40,120,255,.18), transparent 55%),
    linear-gradient(#083a52 0%, #052839 30%, #031d2a 65%, #02111a 100%);
}

/* light rays */
.rays{
  position:absolute;
  inset:-10% -20%;
  background:
    repeating-linear-gradient(
      75deg,
      rgba(255,255,255,0.06) 0px,
      rgba(255,255,255,0.06) 14px,
      transparent 14px,
      transparent 42px
    );
  mix-blend-mode: screen;
  opacity: .35;
  transform: rotate(-6deg);
  animation: raysMove 10s ease-in-out infinite alternate;
}

@keyframes raysMove{
  from { transform: rotate(-6deg) translateY(0); opacity: .28; }
  to   { transform: rotate(-8deg) translateY(30px); opacity: .40; }
}

/* soft waves */
.waves{
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.05), transparent 35%),
    radial-gradient(circle at 70% 50%, rgba(255,255,255,0.04), transparent 38%),
    radial-gradient(circle at 40% 70%, rgba(255,255,255,0.035), transparent 40%);
  animation: waves 12s ease-in-out infinite;
  opacity: .8;
}

@keyframes waves{
  0%,100% { transform: translateX(0) translateY(0); }
  50%     { transform: translateX(-18px) translateY(12px); }
}

/* particles (tiny plankton) */
.particles{
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 10% 20%, rgba(255,255,255,.20) 1px, transparent 2px),
    radial-gradient(circle at 20% 60%, rgba(255,255,255,.14) 1px, transparent 2px),
    radial-gradient(circle at 30% 40%, rgba(255,255,255,.16) 1px, transparent 2px),
    radial-gradient(circle at 45% 25%, rgba(255,255,255,.12) 1px, transparent 2px),
    radial-gradient(circle at 60% 55%, rgba(255,255,255,.16) 1px, transparent 2px),
    radial-gradient(circle at 75% 35%, rgba(255,255,255,.14) 1px, transparent 2px),
    radial-gradient(circle at 90% 65%, rgba(255,255,255,.12) 1px, transparent 2px);
  opacity: .55;
  filter: blur(.15px);
}

.particles.p1{ animation: drift1 14s linear infinite; }
.particles.p2{ opacity:.35; animation: drift2 18s linear infinite; }

@keyframes drift1{
  from { transform: translateY(30px) translateX(0); }
  to   { transform: translateY(-30px) translateX(-40px); }
}
@keyframes drift2{
  from { transform: translateY(10px) translateX(0); }
  to   { transform: translateY(-50px) translateX(30px); }
}

/* ===== BUBBLES ===== */
.bubbles{
  position:absolute;
  inset:0;
  opacity:.8;
  animation: bubblesUp 7s linear infinite;
  pointer-events:none;
}

.bubbles.b1{
  background:
    radial-gradient(circle at 12% 92%, rgba(255,255,255,0.55) 4px, transparent 5px),
    radial-gradient(circle at 22% 80%, rgba(255,255,255,0.35) 3px, transparent 4px),
    radial-gradient(circle at 36% 88%, rgba(255,255,255,0.5) 5px, transparent 6px),
    radial-gradient(circle at 56% 84%, rgba(255,255,255,0.35) 3px, transparent 4px),
    radial-gradient(circle at 74% 90%, rgba(255,255,255,0.55) 4px, transparent 5px),
    radial-gradient(circle at 88% 78%, rgba(255,255,255,0.4) 3px, transparent 4px);
}

.bubbles.b2{
  opacity:.55;
  animation-duration: 10s;
  background:
    radial-gradient(circle at 18% 96%, rgba(255,255,255,0.35) 3px, transparent 4px),
    radial-gradient(circle at 44% 92%, rgba(255,255,255,0.45) 4px, transparent 5px),
    radial-gradient(circle at 68% 97%, rgba(255,255,255,0.30) 3px, transparent 4px),
    radial-gradient(circle at 82% 90%, rgba(255,255,255,0.40) 4px, transparent 5px);
}

@keyframes bubblesUp{
  from { transform: translateY(0); }
  to   { transform: translateY(-260px); }
}

/* ===== HORSEA BASE ===== */
.horsea{
  position:absolute;
  top: 54%;
  width: 96px;
  height: 96px;
  background-size: contain;
  background-repeat: no-repeat;
  filter: drop-shadow(0 12px 22px rgba(0,0,0,.32));
  transform: translateY(-50%);
  opacity: 1;
}

/* Horsea #1 normal: RS normal + DP normal */
.horsea--normal{
  left: -140px;
  animation:
    horseaFloat 1.8s ease-in-out infinite,
    horseaApproachLeft var(--cycle) linear infinite,
    horseaFramesNormal 0.55s steps(2) infinite;
}

/* Horsea #2 shiny: RS shiny + DP shiny, mirrored */
.horsea--shiny{
  right: -140px;
  animation:
    horseaFloatRight 1.8s ease-in-out infinite,
    horseaApproachRight var(--cycle) linear infinite,
    horseaFramesShiny 0.55s steps(2) infinite;
}

/* frame swapping for normal horsea */
@keyframes horseaFramesNormal{
  0%   { background-image: url("https://img.pokemondb.net/sprites/ruby-sapphire/normal/horsea.png"); }
  50%  { background-image: url("https://img.pokemondb.net/sprites/diamond-pearl/normal/horsea.png"); }
  100% { background-image: url("https://img.pokemondb.net/sprites/ruby-sapphire/normal/horsea.png"); }
}

/* frame swapping for shiny horsea */
@keyframes horseaFramesShiny{
  0%   { background-image: url("https://img.pokemondb.net/sprites/ruby-sapphire/shiny/horsea.png"); }
  50%  { background-image: url("https://img.pokemondb.net/sprites/diamond-pearl/shiny/horsea.png"); }
  100% { background-image: url("https://img.pokemondb.net/sprites/ruby-sapphire/shiny/horsea.png"); }
}

/* floating */
@keyframes horseaFloat{
  0%,100% { transform: translateY(-50%) translateY(0); }
  50%     { transform: translateY(-50%) translateY(-18px); }
}
@keyframes horseaFloatRight{
  0%,100% { transform: translateY(-50%) scaleX(-1) translateY(0); }
  50%     { transform: translateY(-50%) scaleX(-1) translateY(-18px); }
}

/* approach timelines (they meet then disappear) */
@keyframes horseaApproachLeft{
  0%   { left: -140px; opacity: 1; }
  40%  { left: 36%; opacity: 1; }
  46%  { left: 45%; opacity: 1; }     /* close */
  52%  { left: 48%; opacity: 0; }     /* vanish for evolve */
  100% { left: -140px; opacity: 0; }
}
@keyframes horseaApproachRight{
  0%   { right: -140px; opacity: 1; }
  40%  { right: 36%; opacity: 1; }
  46%  { right: 45%; opacity: 1; }
  52%  { right: 48%; opacity: 0; }
  100% { right: -140px; opacity: 0; }
}

/* ===== EVOLUTION FLASH ===== */
.flash{
  position:absolute;
  left: 50%;
  top: 54%;
  width: 14px;
  height: 14px;
  border-radius: 999px;
  transform: translate(-50%, -50%) scale(0.2);
  opacity: 0;
  background: radial-gradient(circle, rgba(255,255,255,1), rgba(255,255,255,0) 65%);
  box-shadow: 0 0 0 rgba(255,255,255,0);
  animation: flashBurst var(--cycle) linear infinite;
}

@keyframes flashBurst{
  0%, 48% { opacity: 0; transform: translate(-50%,-50%) scale(0.2); }
  52%     { opacity: 1; transform: translate(-50%,-50%) scale(24); box-shadow: 0 0 90px 30px rgba(255,255,255,.8); }
  56%     { opacity: 0; transform: translate(-50%,-50%) scale(0.2); box-shadow: 0 0 0 rgba(255,255,255,0); }
  100%    { opacity: 0; }
}

/* ===== SEADRA (no silver/shiny) ===== */
.seadra{
  position:absolute;
  top: 54%;
  left: 50%;
  width: 110px;
  height: 110px;

  background-size: contain;
  background-repeat: no-repeat;
  filter: drop-shadow(0 14px 26px rgba(0,0,0,.35));

  opacity: 0;
  transform: translate(-50%, -50%) scale(0.2);

  animation:
    seadraAppear var(--cycle) linear infinite,
    seadraRunFrames 0.42s steps(2) infinite,
    seadraWildMove var(--cycle) linear infinite;
}

/* appear after evolve */
@keyframes seadraAppear{
  0%, 55%{
    opacity: 0;
    transform: translate(-50%,-50%) scale(0.2);
  }
  58%{
    opacity: 1;
    transform: translate(-50%,-50%) scale(1.05);
  }
  100% { opacity: 1; }
}

/* Seadra frames ONLY RS+DP normal */
@keyframes seadraRunFrames{
  0%   { background-image: url("https://img.pokemondb.net/sprites/diamond-pearl/normal/seadra.png"); }
  50%  { background-image: url("https://img.pokemondb.net/sprites/ruby-sapphire/normal/seadra.png"); }
  100% { background-image: url("https://img.pokemondb.net/sprites/diamond-pearl/normal/seadra.png"); }
}

/* movement/jumps/spins (starts after 58%) */
@keyframes seadraWildMove{
  0%, 57%{
    left: 50%;
    transform: translate(-50%,-50%) scale(0.2) rotate(0deg);
  }

  58%{
    left: 50%;
    transform: translate(-50%,-50%) scale(1.05) rotate(0deg);
  }

  /* run to right */
  66%{
    left: 82%;
    transform: translate(-50%,-50%) scale(1.05) rotate(0deg);
  }

  /* jump 1 */
  70%{
    left: 76%;
    transform: translate(-50%,-78%) scale(1.05) rotate(0deg);
  }
  73%{
    left: 70%;
    transform: translate(-50%,-50%) scale(1.05) rotate(0deg);
  }

  /* run to left */
  81%{
    left: 18%;
    transform: translate(-50%,-50%) scale(1.05) rotate(0deg);
  }

  /* jump 2 */
  85%{
    left: 26%;
    transform: translate(-50%,-86%) scale(1.05) rotate(0deg);
  }
  88%{
    left: 34%;
    transform: translate(-50%,-50%) scale(1.05) rotate(0deg);
  }

  /* big spin */
  93%{
    left: 50%;
    transform: translate(-50%,-50%) scale(1.05) rotate(360deg);
  }

  /* exit */
  100%{
    left: 112%;
    transform: translate(-50%,-50%) scale(1.05) rotate(540deg);
  }
}

/* ===== CAPTION ===== */
.caption{
  position:absolute;
  left: 18px;
  bottom: 18px;
  padding: 10px 14px;
  border-radius: 14px;
  color: rgba(255,255,255,.9);
  background: rgba(0,0,0,.22);
  border: 1px solid rgba(255,255,255,.14);
  backdrop-filter: blur(6px);
  font-size: 14px;
}
